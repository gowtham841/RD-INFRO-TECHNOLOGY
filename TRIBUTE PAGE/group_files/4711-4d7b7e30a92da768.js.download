(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4711],{61847:function(e,t,r){"use strict";r.d(t,{u_:function(){return v},r6:function(){return p},Lt:function(){return d.y}});var n=r(37340),a=r(85893),o=r(86221),i=r(31420),l=r(67814),s=r(93967),c=r.n(s),u=r(26793),d=r(6183),m=r(15783),h=r.n(m);let p=e=>{let{className:t,children:r,ruled:n}=e;return(0,a.jsx)("h4",{className:c()("mb-2 font-bold text-lg text-center md:text-left mt-5 md:mt-0 text-grey-black",n&&"border-b pb-4 border-grey-mid",t),children:r})};function f(){let e=(0,n._)(["language.close"]);return f=function(){return e},e}let v=e=>{let{children:t,className:r,transition:n=d.y.Zoom,large:s=!1,overlayClassName:m,...p}=e,{t:v}=(0,u.$)();return(0,a.jsx)(d.B,{...p,transition:n,className:c()(m,"md:p-10"),children:(0,a.jsxs)("div",{className:c()(h().modal,s&&h().large,"bg-white p-4 md:px-10 md:py-8 md:rounded-md overflow-auto shadow-md size-full md:size-auto box-border",r),"data-testid":"popup",children:[(0,a.jsx)(o.TRl,{variant:"dark",className:"mx-auto md:hidden"}),(0,a.jsx)("button",{className:"absolute text-2xl text-grey-mid right-5 top-3 md:right-10 md:top-8 hover:text-navy transition-colors",title:v(f()),onClick:p.onHide,children:(0,a.jsx)(l.G,{className:"fill-current",icon:i.NB})}),t]})})}},95767:function(e,t,r){"use strict";r.d(t,{LX:function(){return l},qV:function(){return s},yV:function(){return a}});var n,a,o=r(50577),i=r.n(o);let l=300;(n=a||(a={})).Zoom="zoom",n.Fade="fade",n.SlideDown="slide-down",n.Flyout="flyout",n.MobileReverseFlyout="mobile-reverse-flyout";let s={fade:{base:"transition-opacity",entering:"opacity-0",entered:"opacity-100",exiting:"opacity-0",exited:"opacity-0"},zoom:{base:i().zoom,entering:"scale-105 opacity-0",entered:"scale-100 opacity-1",exiting:"scale-105 opacity-0"},"slide-down":{base:"transition-transform",entering:i()["slide-top-out"],entered:"translate-y-0",exiting:i()["slide-top-out"]},flyout:{base:"absolute top-0 transition-transform right-0 transform",entering:"translate-x-full",entered:"translate-x-0",exiting:"translate-x-full"},"mobile-reverse-flyout":{base:"fixed top-0 transform transition-transform left-0 2xl:right-0 2xl:left-auto",entering:"-translate-x-full 2xl:translate-x-full",entered:"translate-x-0",exiting:"-translate-x-full 2xl:translate-x-full"}}},6183:function(e,t,r){"use strict";r.d(t,{B:function(){return m},y:function(){return c.yV}});var n=r(85893),a=r(93967),o=r.n(a),i=r(67294),l=r(26273),s=r(66791),c=r(95767),u=r(27476);let d=(e,t)=>o()("duration-".concat(c.LX),t.base,t[e]),m=e=>{let{show:t,onHide:r,children:a,transition:m=c.yV.Fade,alwaysRendered:h=!1,className:p,...f}=e,v=(0,i.useRef)(null),g=a.props,y=e=>r(e),w=c.qV[c.yV.Fade],x=c.qV[m];(0,s.Z)("keydown",e=>{t&&"Escape"===e.key&&y(e)});let b=()=>{t&&v.current&&v.current.focus()},C=(0,n.jsx)(l.ZP,{in:t,timeout:{appear:c.LX,exit:c.LX},onEntered:()=>{setTimeout(b,c.LX)},unmountOnExit:!h,children:e=>{let t=d(e,w),r=d(e,x);return(0,n.jsxs)("div",{...f,className:o()("fixed top-0 left-0 flex flex-col items-center size-full box-border z-50","exited"===e&&"pointer-events-none hidden",p),children:[(0,n.jsx)("button",{ref:v,className:o()("fixed left-0 top-0 size-full bg-black bg-opacity-50",t),onClick:y}),(0,i.cloneElement)(a,{...g,className:o()(g.className,r)})]})}});return h?C:(0,n.jsx)(u.X,{children:C})}},98346:function(e,t,r){"use strict";r.d(t,{hE:function(){return N}});var n,a,o=r(37340),i=r(85893),l=r(45429),s=r(86221),c=r(83109),u=r(11163),d=r(67294),m=r(10708),h=r(87536),p=r(26793),f=r(82790),v=r(8719),g=r(7057),y=r(34396),w=r(61847);function x(){let e=(0,o._)(["enterprise-search.download-confirmation-prompt.client-name"]);return x=function(){return e},e}let b=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.reduce((e,t,r)=>(e.push({key:r,value:t.id,text:t.name,option:r}),e),[])};(n=a||(a={}))[n.NotMandatory=0]="NotMandatory",n[n.Max=1]="Max",n[n.ISBN=2]="ISBN",n[n.FinanceCode=3]="FinanceCode",n[n.Digits=4]="Digits",n[n.MandatoryWithEmail=5]="MandatoryWithEmail",n[n.Date=6]="Date",n[n.Required=7]="Required";let C={7:{value:!0,message:"enterprise-search.download-confirmation-prompt.fill-out-field"},2:{value:/^(?=(?:\D*\d){10}(?:(?:\D*\d){3})?$)[\d-]+$/,message:"enterprise-search.download-confirmation-prompt.not-valid"},3:{value:/^([a-zA-Z0-9]{1}\/([a-zA-Z0-9]){4}\/([a-zA-Z0-9]){6}\.([a-zA-Z0-9]){4})$/i,message:"enterprise-search.download-confirmation-prompt.not-valid"},4:{value:/^\d{13}$/i,message:"enterprise-search.download-confirmation-prompt.not-valid"},6:{value:/^(0[1-9]|[12][0-9]|3[01])[/](0[1-9]|1[012])[/](19|20)\d\d$/i,message:"enterprise-search.download-confirmation-prompt.not-valid"}},j=e=>{switch(e){case 1:return{maxLength:128,required:C[7]};case 2:return{maxLength:13,pattern:C[2],required:C[7]};case 3:return{pattern:C[3],required:C[7]};case 4:return{pattern:C[4],required:C[7]};case 6:return{pattern:C[6],required:C[7]};default:return{}}},E=(e,t,r)=>{let{t:n}=(0,p.$)();return e.map(e=>{var a,o;let l=(null===(a=r[e.name])||void 0===a?void 0:a.message)?n((null===(o=r[e.name])||void 0===o?void 0:o.message)||""):"";return(0,i.jsx)("div",{className:"mt-5",children:(0,i.jsx)(y.U,{required:!!j(e.validation).required,label:e.description,errorMessage:l,maxLength:j(e.validation).maxLength,...t(e.name,j(e.validation))})},e.name)})},N=e=>{var t,r;let{show:n,onHide:a,userDetails:o,downloadHandler:C,defaultProjectRef:j,isAdditionalDetails:N=!1,product:k}=e,{t:P}=(0,p.$)(),D=(0,u.useRouter)(),I=(null==D?void 0:D.pathname)==="/shopping-cart",[S]=(0,m.Z)([f.Xc]),A=!(null==o?void 0:o.bespokeDetails.length)||(null==o?void 0:o.isAdGroup),T=null==o?void 0:o.bespokeDetails.reduce((e,t)=>({...e,[t.name]:""}),{}),R=A?{reference:j,adClientId:S[f.Xc],...T}:{...T},{register:q,handleSubmit:M,reset:L,formState:U,control:O}=(0,h.cI)({defaultValues:R,shouldFocusError:!1}),_=M(e=>C(e)),{errors:Z}=U,[F,V]=(0,d.useState)(!1),B=(null==k?void 0:k.type)===c.ProductType.Video;return d.useEffect(()=>{n&&L(R)},[n]),(0,i.jsxs)(w.u_,{alwaysRendered:!0,show:n,onHide:a,overlayClassName:"h-full",className:"overflow-hidden flex flex-col max-h-full",children:[(0,i.jsx)(w.r6,{children:P("enterprise-search.download-confirmation-prompt.title")}),((null==k?void 0:k.restriction)||(null==k?void 0:k.isNews))&&(0,i.jsx)("div",{className:"flex-1 max-h-fit overflow-hidden",id:"consent-box",children:(0,i.jsx)(l.a7,{data:(0,l.er)(P,I?l.H5.CartProductPopupConsent:B?l.H5.VideoPopupConsent:l.H5.ImagePopupConsent,!0),boxActive:F,handleChange:e=>{V(void 0===e?!F:e)},className:"!pr-2 overflow-hidden h-full",contentWrapper:"pr-2 overflow-auto h-full [&::-webkit-scrollbar-thumb]:bg-gray-700 [&::-webkit-scrollbar-track]:bg-gray-200  [&::-webkit-scrollbar]:w-1.5 [&::-webkit-scrollbar-thumb]:rounded-full [&::-webkit-scrollbar-track]:rounded-full"})}),(0,i.jsxs)("div",{className:"max-h-fit",children:[(null==o?void 0:o.isAdGroup)?(0,i.jsx)("div",{className:"mt-5",children:(0,i.jsx)(h.Qr,{name:"adClientId",control:O,rules:{required:{value:!0,message:P("enterprise-search.download-confirmation-prompt.enter-client-name")}},render:e=>{var t;return(0,i.jsx)(g.F,{required:!0,options:b(null==o?void 0:o.adUsers),value:e.field.value,onBlur:e.field.onBlur,onChange:e.field.onChange,errorMessage:null===(t=Z.adClientId)||void 0===t?void 0:t.message,label:P(x())})}})}):E((null==o?void 0:o.bespokeDetails)||[],q,Z),A&&N&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{className:"text-base mt-5",children:P("enterprise-search.download-confirmation-prompt.subtitle")}),(0,i.jsx)("div",{className:"mt-5",id:"more-details",children:(0,i.jsx)(y.U,{required:!0,label:P("enterprise-search.download-confirmation-prompt.placeholder-reference"),errorMessage:null===(t=Z.reference)||void 0===t?void 0:t.message,...q("reference",{required:{value:!0,message:P("enterprise-search.download-confirmation-prompt.enter-reference")}}),defaultValue:j,"data-testid":"download_preference"})}),(0,i.jsx)("div",{className:"mt-5",children:(0,i.jsx)(y.U,{isMultiline:!0,label:P("enterprise-search.download-confirmation-prompt.placeholder-comments"),errorMessage:null===(r=Z.comment)||void 0===r?void 0:r.message,...q("comment",{}),"data-testid":"comments"})})]})]}),(0,i.jsxs)("div",{className:"flex mt-5 max-h-fit",children:[(0,i.jsx)(s.Yd2,{disabled:!!(((null==k?void 0:k.restriction)||(null==k?void 0:k.isNews))&&!F),primary:!0,size:s.qE.Large,"data-testid":"download-image-button",onClick:e=>{if(F&&(0,v.L9)({action:v.aU.EnableChkBoxDownloadConfirmationPopup,event:v.ju.Click,label:v.D_.DownloadConfirmationPopupCheckboxEnable,category:B?v.WD.VideoPageInteractions:v.WD.ImagePageInteractions}),N){_(e),F&&(0,v.L9)({event:v.ju.Click,action:v.aU.DownloadRestrictionBanner,category:v.WD.ShoppingCartInteractions,label:v.D_.EnableChkboxRestrictionConsent});return}C({},k)},className:"flex items-center justify-center w-full mr-8 font-bold 3xs:text-base",children:P("enterprise-search.download-confirmation-prompt.download")}),(0,i.jsx)(s.Yd2,{onClick:a,size:s.qE.Large,className:"flex items-center justify-center w-full font-bold 3xs:text-base",children:P("enterprise-search.download-confirmation-prompt.cancel")})]})]})}},35137:function(e,t,r){"use strict";r.d(t,{e:function(){return d},h:function(){return m}});var n=r(85893),a=r(86221),o=r(87536),i=r(26793),l=r(8719),s=r(3659),c=r(34396),u=r(61847);let d="password",m=e=>{var t;let{show:r,onHide:m,onSubmit:h}=e,{t:p}=(0,i.$)(),{register:f,handleSubmit:v,formState:g,setError:y}=(0,o.cI)({shouldFocusError:!1}),{errors:w}=g;return(0,n.jsxs)(u.u_,{alwaysRendered:!0,show:r,onHide:m,children:[(0,n.jsx)(u.r6,{ruled:!0,children:p("enterprise-search.password-confirmation-prompt.title")}),(0,n.jsx)("div",{children:(0,n.jsx)("div",{className:"mt-5",children:(0,n.jsx)(c.U,{required:!0,type:"password",label:p("enterprise-search.password-confirmation-prompt.placeholder-password"),"data-testid":"password-input",errorMessage:null===(t=w.password)||void 0===t?void 0:t.message,...f(d,{required:{value:!0,message:p("enterprise-search.password-confirmation-prompt.incorrect-password")}})})})}),(0,n.jsx)("div",{className:"mt-2",children:(0,n.jsx)("a",{href:"/forgot-password/",target:"_blank",className:"mr-5 text-sm border-0 md:inline-block highlighted-link",children:p("enterprise-search.password-confirmation-prompt.forgot-password")})}),(0,n.jsx)("div",{className:"flex mt-5",children:(0,n.jsx)(a.Yd2,{primary:!0,size:a.qE.Large,onClick:v(e=>{h(e,y),(0,l.L9)({event:s.ju.Click,action:s.aU.CTACLick,category:s.WD.ShoppingCartInteractions,label:s.qB.PasswordConfirmation})}),"data-testid":"confirm-password-button",className:"flex items-center justify-center w-1/2 mr-8 font-bold 3xs:text-base",children:p("enterprise-search.password-confirmation-prompt.continue")})})]})}},50440:function(e,t,r){"use strict";r.d(t,{Bv:function(){return d},Ey:function(){return v},LT:function(){return c},M3:function(){return s},S7:function(){return f},Td:function(){return p},Z8:function(){return h},hH:function(){return l},nr:function(){return g},ob:function(){return i},uP:function(){return y}});var n=r(332),a=r(8719);r(20494);var o=r(69454);let i=(e,t)=>{(0,a.L9)({event:a.ju.Click,action:e,category:a.WD.SearchBar,label:e===a.aU.ReverseImageIconClick?"":t})},l=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e.replace(/-/g," ")},s=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return l(e).toLowerCase()},c=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e.trim().replace(/[\s_]+/g,"-")},u=function(){var e;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return(null==t?void 0:null===(e=t.charAt(0))||void 0===e?void 0:e.toUpperCase())+(null==t?void 0:t.slice(1))},d=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return u(s(e))},m=e=>e?"".concat(encodeURIComponent(c(e)),".html"):"",h=e=>encodeURIComponent(c(e)),p=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"en";return"".concat((0,n.q)(n.A.KeywordVideoSearch,t)).concat(m(e))},f=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"en";return"".concat((0,n.q)(n.A.KeywordSearch,t)).concat(m(e))},v=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return e&&e.includes(t)?e.replace("".concat(t," "),"".concat(t,"+")):e},g=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return t?"".concat(e).concat(encodeURIComponent((0,o.tF)(t)),".html"):e},y=(e,t,r,a,o)=>{let i=r?encodeURIComponent(c(r)):"",l=r?"".concat(i,".html"):"";if(e===n.A.SearchNews)return"".concat(t,"?qt=").concat(r);let s=0===o?"?qt=".concat(i):"?imgt=".concat(o,"&qt=").concat(i);return["noveluse","bespoke","editorial"].some(e=>t.includes(e))?"".concat(t).concat(l).concat(s):"".concat(t).concat(l).concat(a?"?".concat(a):"")}},69454:function(e,t,r){"use strict";r.d(t,{Uz:function(){return C},Vp:function(){return w},q3:function(){return b},tF:function(){return y},x6:function(){return x}});var n=r(37340),a=r(85893),o=r(99381),i=r(67814),l=r(26793),s=r(332),c=r(22926),u=r(29479),d=r(8719),m=r(44362),h=r(81198);function p(){let e=(0,n._)(["search-tags.search-video-by-tags"]);return p=function(){return e},e}function f(){let e=(0,n._)(["search-tags.search-by-tags"]);return f=function(){return e},e}function v(){let e=(0,n._)(["search-tags.show-fewer"]);return v=function(){return e},e}function g(){let e=(0,n._)(["search-tags.show-all"]);return g=function(){return e},e}let y=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e.replace(/[ ./\\]+/g,"-").replace(/^-|-$/,"")},w=e=>{let{keyword:t,searchUrl:r,onClick:n,noFollow:l}=e;return(0,a.jsxs)("a",{className:"flex items-center max-w-full px-4 py-2 mb-3 mr-3 text-sm border rounded border-grey-border bg-grey-light hover:border-black min-h-10",href:r,onClick:n,rel:l?"nofollow":void 0,children:[(0,a.jsx)(i.G,{className:"mr-2 text-xs",icon:o.wn}),(0,a.jsx)("span",{className:"max-w-xs overflow-hidden text-ellipsis",children:String(t)})]})},x=e=>{let{keyword:t,searchUrl:r,showLink:n}=e;return n?(0,a.jsxs)("a",{className:"flex items-center max-w-full px-4 py-2 mb-3 mr-3 text-sm border rounded border-grey-border focus:bg-grey-light hover:bg-grey-light",href:r,children:[(0,a.jsx)(i.G,{className:"mr-2 text-xs",icon:o.wn}),(0,a.jsx)("span",{className:"max-w-xs overflow-hidden text-ellipsis",children:String(t)})]}):(0,a.jsxs)("div",{className:"flex items-center max-w-full px-4 py-2 mb-3 mr-3 text-sm border rounded border-grey-border focus:bg-grey-light hover:bg-grey-light",children:[(0,a.jsx)(i.G,{className:"mr-2 text-xs",icon:o.wn}),(0,a.jsx)("span",{className:"max-w-xs overflow-hidden text-ellipsis",children:String(t)})]})},b=e=>{let{keywords:t,disableLinkForBot:r=!1,video:n=!1}=e,{t:o}=(0,l.$)(),{containerRef:i,hasOverflow:b,isExpanded:C,toggleExpanded:j}=(0,c.E)(),E=(0,u.b)(),N=(0,s.q)(n?s.A.KeywordVideoSearch:s.A.KeywordSearch,E),k=n&&"de"===E;return t.length?(0,a.jsxs)("div",{className:"text-grey-black",children:[(0,a.jsx)(h.M,{text:o(n?p():f()),collapseRuler:!0,children:b&&(0,a.jsx)(h.A,{role:"button",onClick:j,children:o(C?v():g())})}),(0,a.jsx)("div",{className:C?void 0:"overflow-hidden max-h-24",ref:i,children:(0,a.jsx)("div",{className:"overflow-hidden",children:(0,a.jsx)("div",{className:"flex flex-wrap -mb-3",children:t.map(e=>{let t="string"==typeof e?e:e.key,o="string"==typeof e?e:e.label,i="string"==typeof e?"".concat(N).concat(y(e),".html"):e.href;return r?(0,a.jsx)(x,{keyword:o,showLink:"en"===E,searchUrl:i},t):(0,a.jsx)(w,{searchUrl:i,keyword:o,onClick:()=>(0,m.Gq)(d.aU.KeywordClick,t,n),noFollow:k},t)})})})})]}):null},C=e=>(0,a.jsx)(b,{video:!0,...e})},81198:function(e,t,r){"use strict";r.d(t,{A:function(){return l},M:function(){return i}});var n=r(85893),a=r(93967),o=r.n(a);let i=e=>{let{text:t,children:r,collapseRuler:a=!1,hideLine:i=!1,useCustomHeading:l=!1}=e;return(0,n.jsxs)("div",{className:o()("flex justify-start mb-4 text-black md:flex-row md:items-center",r?"flex-wrap items-center":"items-center"),children:[l?(0,n.jsx)("div",{className:"mr-5 text-lg",children:t}):(0,n.jsx)("h2",{className:"mr-5 text-lg",children:t}),r,!i&&(0,n.jsx)("hr",{className:o()("flex grow border-t border-grey-border",a?"hidden md:block":"")})]})},l=e=>{let{className:t,...r}=e;return(0,n.jsx)("a",{"data-testid":"search-header-link",className:o()("mr-5 text-sm border-0 md:inline-block text-blue hover:underline font-noto",t),...r})}},72756:function(e,t,r){"use strict";r.d(t,{Zl:function(){return v},oZ:function(){return f},wu:function(){return a}});var n,a,o=r(85893),i=r(45429),l=r(11163),s=r(67294),c=r(10708),u=r(98346),d=r(35137),m=r(82790),h=r(54611),p=r(9140);(n=a||(a={})).AddToCart="add-to-cart",n.BuyNow="buy-now";let f=(0,s.createContext)({cart:{count:0},setCart:()=>{},cartActiveAction:null,whileAddingToCart:()=>Promise.resolve(),whileBuyingNow:()=>Promise.resolve(),downloadHandler:()=>Promise.resolve(),setSelctedProduct:()=>{},setUser:()=>{}}),v=e=>{let{cart:t,children:r}=e,n=(0,l.useRouter)(),{products:a}=(0,s.useContext)(i.oZ),[v,g]=(0,s.useState)(t),[y,w]=(0,p.$)(),[x,b]=(0,p.$)(),[C,j]=(0,s.useState)({}),[E,N]=(0,s.useState)({}),[k,P]=(0,s.useState)(!1),[D,I]=(0,s.useState)(!1),S={isAdGroup:!!(null==E?void 0:E.isAdGroup),adUsers:(null==E?void 0:E.adUsers)||[],bespokeDetails:(null==E?void 0:E.bespokeDetails)||[]},[A]=(0,c.Z)(),{verifySession:T,downloadImageSubmitHandler:R,passwordConfirmationSubmitHandler:q,createBDOHandler:M}=(0,h.q)(C,I,P,!!(null==E?void 0:E.additionalDetails),E,a),L=(null==n?void 0:n.pathname)==="/shopping-cart",U=async()=>{await T((null==E?void 0:E.additionalDetails)?void 0:C)};return(0,s.useEffect)(()=>{g(t)},[t]),(0,o.jsxs)(f.Provider,{value:{cart:v,setCart:g,cartActiveAction:y&&"add-to-cart"||x&&"buy-now"||null,whileAddingToCart:w,whileBuyingNow:b,downloadHandler:U,setSelctedProduct:j,setUser:N},children:[r,(0,o.jsx)(u.hE,{userDetails:S,product:C,show:k,onHide:()=>P(!1),downloadHandler:L?M:R,defaultProjectRef:A[m.WM],isAdditionalDetails:!!(null==E?void 0:E.additionalDetails)}),(0,o.jsx)(d.h,{show:D,onHide:()=>I(!1),onSubmit:q})]})}},28526:function(e,t,r){"use strict";r.d(t,{Y:function(){return i}});var n=r(83109),a=r(67294);let o={layoutData:{currency:n.CurrencyCode.GBP,countryCode:null,contactNumber:"",imageCount:0,isDefaultData:!0}},i=(0,a.createContext)(o)},8232:function(e,t,r){"use strict";r.d(t,{ET:function(){return i},tP:function(){return o}});var n=r(85893),a=r(67294);let o=(0,a.createContext)({lightboxes:[],setLightboxes:()=>{}}),i=e=>{let{lightboxes:t,children:r}=e,[i,l]=(0,a.useState)(t);return(0,a.useEffect)(()=>{l(t)},[t]),(0,n.jsx)(o.Provider,{value:{lightboxes:i,setLightboxes:l},children:r})}},54611:function(e,t,r){"use strict";r.d(t,{q:function(){return S}});var n=r(45429),a=r(83109),o=r(11163),i=r(80129),l=r(67294),s=r(10708),c=r(26793),u=r(35137),d=r(98981),m=r(82790),h=r(332),p=r(43672),f=r(3659),v=r(44362),g=r(47640),y=r(31263),w=r(20494),x=r(76540),b=r(45381),C=r(41960),j=r(31671),E=r(20506),N=r(34998),k=r(29479),P=r(13317);let D=()=>(0,l.useContext)(P.N).session,I=e=>Object.keys(e).reduce((t,r)=>t?"".concat(t,"^^").concat(r,"||").concat(e[r]):"".concat(r,"||").concat(e[r]),""),S=function(e,t,r){var P,S;let A=arguments.length>3&&void 0!==arguments[3]&&arguments[3],T=arguments.length>4?arguments[4]:void 0,R=arguments.length>5?arguments[5]:void 0,q=(0,C.h)(),M=(0,k.b)(),{countryCode:L}=(0,N.Q)(),[U,O]=(0,s.Z)(),{t:_}=(0,c.$)(),Z=(0,o.useRouter)(),F=D(),V=(0,E.ev)(),B=(0,j.D)(),[W,z]=(0,l.useState)({}),G=(null==Z?void 0:Z.pathname)==="/shopping-cart",$=(null===(P=U[w.d0])||void 0===P?void 0:P.toUpperCase())||(null==T?void 0:null===(S=T.territoryId)||void 0===S?void 0:S.toUpperCase())||L,H=e=>{let t=(0,x.PM)();e.forEach(e=>{O(e.name,e.value,{path:e.path,secure:e.secure,domain:t})})},Q=async e=>{let{commercetoolsConfig:t}=(0,d.b)(),r=await (0,n.pM)(t,U.ctToken),a=(null==r?void 0:r.lineItems.map(e=>{var t,r;return{Id:e.id,ProductId:null===(r=e.custom)||void 0===r?void 0:null===(t=r.fields)||void 0===t?void 0:t.alamy_assetId,ProductType:(0,b.Wv)(e)?f.C0.Video:f.C0.Image}}))||[],o={OrderId:(null==r?void 0:r.id)||"",LangCode:M,CountryCode:$||"",Items:a,PurchaseOrderRef:(null==e?void 0:e.reference)||"",Comments:(null==e?void 0:e.comment)||""};(null==e?void 0:e.adClientId)&&O(m.Xc,e.adClientId),(null==e?void 0:e.reference)&&O(m.WM,e.reference),(await (0,p.VC)(q)(o)).success&&r&&(await (0,n.Gs)(r),window.location.href=(0,h.q)(h.A.DownloadedImages,M),(0,v.Tj)(R))},X=async(t,n,o)=>{var l,s,c,u,d,h,f;let b;let C=A?e:n,j={isBot:B,locale:M,seqOrRef:(null==C?void 0:null===(l=C.altids)||void 0===l?void 0:l.seq)||""},{data:E}=await (0,p.wv)(q)(j,!1);if((null==C?void 0:C.type)===a.ProductType.Video){let e={videoId:null!==(c=null==C?void 0:null===(s=C.altids)||void 0===s?void 0:s.id)&&void 0!==c?c:"",projectReference:t.reference,comments:t.comment};b=await (0,p.AI)(q)(e)}else{let e=(0,i.parse)(U[w.mh]||""),r=w.wC.map(t=>t===w.n2?(0,x.SS)(e[w.eI],e[w.Qy]):e[t]||""),n={imageId:(null==C?void 0:null===(u=C.altids)||void 0===u?void 0:u.id)||"",imageRef:(null==C?void 0:null===(d=C.altids)||void 0===d?void 0:d.ref)||"",isVector:(null==C?void 0:null===(h=C.meta)||void 0===h?void 0:h.picturetype)===a.PictureType.Vector,isLibraryDownload:"LIBRARY"===C.apaLib,langCode:M,countryCode:$,imageBin:(null==E?void 0:E.renditions)?(0,y.Z2)(E.renditions):0,isNews:(null==C?void 0:C.isNews)||!1,userComments:t.comment||"",projectRef:t.reference||"",iqExtraDetailDesc:!t.reference&&I(t)||"",authOcd:U.AuthOCD||(null==o?void 0:o.value)||(null==W?void 0:W.value),pageNo:"".concat((0,x.rg)(Z)),searchNo:F.id||"",isIntranet:V,licenseType:null==C?void 0:null===(f=C.meta)||void 0===f?void 0:f.licencetype,adClientId:t.adClientId||"",searchId:r.join("")};t.adClientId&&O(m.Xc,t.adClientId),t.reference&&O(m.WM,t.reference),b=await (0,p.GN)(q)(n)}b.availableForDownload&&((0,g.E)(b.downloadUrl),r(!1),(0,v.ZA)(e),z({}))},Y=async e=>{let n={userId:null==T?void 0:T.id,authOcd:U.AuthOCD||null,downloadType:"image",isIntranet:V};if(!U.AuthOCD){t(!0);return}if((await (0,p.uT)(q)(n)).showPasswordPrompt)t(!0);else{if(A||(null==e?void 0:e.restriction)||(null==e?void 0:e.isNews)){r(!0);return}G?await Q():await X({},e,{value:U.AuthOCD})}};return{passwordConfirmationSubmitHandler:async(n,a)=>{let o={userId:(null==T?void 0:T.id)||"",cid:null,password:n[u.e],downloadType:"image"};try{let n=await (0,p.ZY)(q)(o);if(n.cookies){if(t(!1),H(n.cookies),A||(null==e?void 0:e.restriction)||(null==e?void 0:e.isNews)){r(!0),z(n.cookies.find(e=>"AuthOCD"===e.name));return}G?await Q():await X({},e,n.cookies.find(e=>"AuthOCD"===e.name))}}catch(e){a(u.e,{type:"value",message:_("enterprise-search.password-confirmation-prompt.incorrect-password")})}},downloadImageSubmitHandler:X,verifySession:Y,createBDOHandler:Q}}},22926:function(e,t,r){"use strict";r.d(t,{E:function(){return i}});var n=r(67294),a=r(66791);let o=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,[t,r]=(0,n.useState)(null),o=(0,n.useRef)(null),i=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;o.current&&r(e?o.current.scrollHeight>e:o.current.scrollHeight>o.current.offsetHeight)};return(0,n.useEffect)(()=>i(e),[]),(0,a.Z)("resize",()=>i(e)),{containerRef:o,hasOverflow:t,update:i}},i=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=o(e),{hasOverflow:r}=t,[a,i]=(0,n.useState)(null);return(0,n.useEffect)(()=>{"boolean"==typeof r&&i(!r)},[r]),{...t,isExpanded:a,toggleExpanded:e=>{e.preventDefault(),i(!a)},setIsExpanded:i}}},34998:function(e,t,r){"use strict";r.d(t,{Q:function(){return o}});var n=r(67294),a=r(28526);let o=()=>(0,n.useContext)(a.Y).layoutData},93787:function(e,t,r){"use strict";r.d(t,{e:function(){return f}});var n=r(37340),a=r(85893),o=r(67294),i=r(26793),l=r(8232),s=r(29234);let c=(e,t)=>t<3?"...":e.length>t?"".concat(e.slice(0,t-3).trim()).concat("..."):e;var u=r(41960),d=r(63726),m=r(22154);function h(){let e=(0,n._)(["lightbox.view-lightbox"]);return h=function(){return e},e}let p=e=>{let{lightbox:t}=e,{t:r}=(0,i.$)();return(0,a.jsxs)("div",{className:"flex flex-col items-start",children:[c(r("lightbox.save-success-toast",{lightboxName:t.name}),31),(0,a.jsx)("a",{href:"".concat((0,d.W)(d.A.LightboxDetails),"?lbId=").concat(t.id),className:"highlighted-link",children:r(h())})]})},f=()=>{let{showToast:e}=(0,m.e)(),{lightboxes:t,setLightboxes:r}=(0,o.useContext)(l.tP),n=(0,u.h)(),i=t=>{e((0,a.jsx)(p,{lightbox:t}),{style:m.j.Success})},c=async()=>r(await (0,s.RK)(n)());return{currentLightbox:t.find(e=>e.isCurrent),lightboxes:t,updateLightboxes:c,addToLightbox:async(e,t)=>(i(await (0,s.S7)(n)(e,t)),c()),createNewLightboxWithProduct:async(e,t)=>(i(await (0,s.Rg)(n)(e,t)),c())}}},9140:function(e,t,r){"use strict";r.d(t,{$:function(){return o}});var n=r(67294),a=r(86420);let o=()=>{let[e,t]=(0,n.useState)(!1),r=async r=>{if(!e){t(!0);try{await r()}catch(e){(0,a.S3)(e),t(!1)}t(!1)}};return[e,r]}},75414:function(e,t,r){"use strict";r.d(t,{f:function(){return d}});var n=r(67294),a=r(10708),o=r(65064),i=r(82604),l=r(92658),s=r(29479),c=r(75195),u=r(23937);let d=e=>{let t=(0,u.a)(),r=(0,s.b)(),{countryName:d}=(0,c.m)(),{isPPMEnabled:m}=(0,n.useContext)(o.T),[h]=(0,a.Z)([l.B$,l.iZ]);return("true"===h.isPPMEnabled||m)&&!d&&(0,i.Z)(r,t,e,h)}},22154:function(e,t,r){"use strict";r.d(t,{e:function(){return o},j:function(){return a.jf}});var n=r(67294),a=r(21500);let o=()=>(0,n.useContext)(a.rZ)},25320:function(e,t,r){"use strict";r.d(t,{Xq:function(){return o},_R:function(){return i},dv:function(){return a}});var n=r(86420);let a=e=>async()=>{try{return(await e.get("cart")).data}catch(e){throw Error(e.message)}},o=e=>async t=>{try{await e.post("cart",t)}catch(e){(0,n.S3)(e)}},i=e=>async t=>{try{return(await e.post("cart/checkout",t)).data}catch(e){throw Error(e.message)}}},98723:function(e,t,r){"use strict";r.d(t,{SU:function(){return o},Tg:function(){return i},U_:function(){return l}});var n=r(83109),a=r(86420);let o=e=>async function(t,r){let n=!(arguments.length>2)||void 0===arguments[2]||arguments[2],o=arguments.length>3?arguments[3]:void 0,i=arguments.length>4?arguments[4]:void 0;try{return(await e.get("licences/".concat(t,"?lan=").concat(r,"&isSimplifiedPricingFeatureEnabled=").concat(o,"&isVideo=").concat(i),{...n?{}:{validateStatus:null}})).data}catch(e){return(0,a.S3)(e),{rf:null,standard:[],pack:null}}},i=e=>async function(t,r,o,i){let l=arguments.length>4&&void 0!==arguments[4]&&arguments[4],s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"",c=arguments.length>6&&void 0!==arguments[6]?arguments[6]:n.CurrencyCode.GBP,u=arguments.length>7?arguments[7]:void 0,d=!(arguments.length>8)||void 0===arguments[8]||arguments[8];try{return(await e.get("ct-licences?query=".concat(t,"&renditions=").concat(r,"&locale=").concat(o,"&cacheKey=").concat(i,"&licenseType=").concat(s,"&ebm=").concat(l,"&currency=").concat(c,"&collectionId=").concat(u),{...d?{}:{validateStatus:null}})).data}catch(e){return(0,a.S3)(e),{rf:null,standard:[],pack:null}}},l=e=>async t=>{try{return(await e.post("purchase",t)).data}catch(e){throw Error(e.message)}}},29234:function(e,t,r){"use strict";r.d(t,{RK:function(){return n},Rg:function(){return o},S7:function(){return a}});let n=e=>async()=>{try{return(await e.get("lightboxes")).data.items}catch(e){throw Error(e.message)}},a=e=>async(t,r)=>{try{return(await e.post("lightboxes/".concat(t.id),{seq:r.altids.seq,productType:r.type})).data}catch(e){throw Error(e.message)}},o=e=>async(t,r)=>{try{return(await e.post("lightboxes",{name:t,seq:r.altids.seq,productType:r.type})).data}catch(e){throw Error(e.message)}}},43672:function(e,t,r){"use strict";r.d(t,{AI:function(){return Z},GN:function(){return O},Lm:function(){return q},PN:function(){return F},SE:function(){return b},SF:function(){return C},Tm:function(){return N},V7:function(){return A},VC:function(){return _},ZY:function(){return U},bE:function(){return M},dy:function(){return R},ew:function(){return j},fR:function(){return x},kq:function(){return V},n6:function(){return I},pc:function(){return D},s3:function(){return k},tN:function(){return T},uM:function(){return S},uT:function(){return L},uX:function(){return P},wv:function(){return w}});var n=r(83109),a=r(56647),o=r(4893),i=r(17537),l=r(33190),s=r(50440),c=r(98981),u=r(31542),d=r(54113),m=r(86420),h=r(56437),p=r(20494),f=r(25283),v=r(76540);let g=(e,t)=>{let{locale:r,isBot:n,type:a,geo:i,page:c,pn:d,ps:m,nasty:h,editorial:f,lightbox:g,rmuid:y,translate:w,sessionid:x,offset:b,hidecontributor:C}=t,j=o.Yz.reduce((t,r)=>{let n=e[r],a=r===p.A6&&Array.isArray(n)&&n.map(e=>"USA"===e?"us":e.toLowerCase()).join(","),o="ethnicity"===r&&Array.isArray(n)&&n.join(",");return Array.isArray(n)?{...t,[r]:a||o||n.join(",")}:t},e),E=Number(null==j?void 0:j.imgt)===u.lJ.Social,N=Number(null==j?void 0:j.imgt)===u.lJ.AllImages;return{...j,[p.D2]:g?void 0:j[p.D2],qt:(0,v.ZG)(j.qt),hc:(0,s.Ey)(j.hc,"5"),frrate:(0,s.Ey)(j.frrate,"50"),res:(0,s.Ey)(j.res,"4k"),durend:(null==j?void 0:j.durend)>=l.AW?l.t:null==j?void 0:j.durend,imgt:E||N?void 0:j.imgt,langcode:r,isbot:n,type:a,geo:i,pn:d||c,ps:m,page:void 0,nasty:h,editorial:f,lightbox:g,rmuid:y,translate:w,sessionid:x,offset:b,ispartial:!0,hidecontributor:(null==C?void 0:C.join(","))||void 0,...E?{social:!0}:{}}},y=e=>{let{locale:t,isBot:r,ps:n,pn:a,productType:o,isProductUI:i}=e;return{lan:t,bot:r,ps:n,pn:a,type:o,isProductUI:i}},w=e=>function(t){let r=!(arguments.length>1)||void 0===arguments[1]||arguments[1];return e.get("products/".concat(t.seqOrRef),{params:y({...t,isProductUI:!0}),...r?{}:{validateStatus:null}})},x=e=>async t=>{try{return(await e.post("products/aggregate",t)).data}catch(e){throw Error(e.message)}},b=e=>function(t){let r=!(arguments.length>1)||void 0===arguments[1]||arguments[1];return e.get("products/".concat(t.seqOrRef),{params:y({...t,productType:n.ProductType.Video,isProductUI:!0}),...r?{}:{validateStatus:null}})},C=e=>async function(t,r){let o=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=y({...t,ps:(null==t?void 0:t.ps)||13,pn:(null==t?void 0:t.pn)||1}),l=i.type||n.ProductType.Picture,s=l===n.ProductType.Picture&&(null==r?void 0:r.imgt)?{imgt:null==r?void 0:r.imgt}:{},{geo:c,headline:u,user:d,isSSR:p}=r||{};try{let a=(await e.get("search/".concat(t.seqOrRef,"/similar/"),{timeout:o?100:0,params:{...i,geo:c||"GB",headline:u||"",type:l,langcode:i.lan,audienceType:null==d?void 0:d.audienceType,silo:null==d?void 0:d.silo,hidePA:null==d?void 0:d.hidePA,hideDataco:null==d?void 0:d.hideDataco,customScheme:null==d?void 0:d.customScheme,...s,isSSR:!!p,isbot:i.bot,isUserLoggedOut:null==r?void 0:r.isUserLoggedOut}})).data;return{similarProducts:l===n.ProductType.Picture?(0,f.px)(null==a?void 0:a.items,i.lan,!0):(0,f.Bh)(null==a?void 0:a.items),totalMatches:(null==a?void 0:a.totalMatches)||0}}catch(r){let e=r.response;return o&&r.code===h.SM.RequestTimeout?(0,m.S3)(new h.bW(t.seqOrRef),!1):e&&e.status===a.W.TOO_MANY_REQUESTS?(0,m.S3)(new h.uu(t.seqOrRef),!1):(0,m.S3)(r),null}},j=e=>async(t,r)=>{try{return(await e.get("products/".concat(t.seqOrRef,"/same-contributor/"),{params:{...y(t),qt:r}})).data}catch(e){throw Error(e.message)}},E=e=>async(t,r)=>{try{return(await e.get("lightboxes/".concat(t),{params:r})).data}catch(e){throw Error(e.message)}},N=e=>async(t,r)=>{try{let n=(await Promise.allSettled(t.map(t=>E(e)("".concat(t.lightboxId),{...r,ps:t.numberOfImages})))).map(e=>"rejected"===e.status?null:e.value).filter(e=>null!==e);if(!n.length)throw Error("No lightboxes were found");return n}catch(e){throw Error(e.message)}},k=e=>async(t,r)=>{let{locale:n,isBot:a,type:o}=r;try{return(await e.get("products",{params:{...t,lan:n,bot:a,type:o}})).data.items}catch(e){throw Error(e.message)}},P=e=>async(t,r)=>{try{return(await e.get("search",{params:g(t,r)})).data}catch(e){throw Error(e.message)}},D=e=>async t=>{try{return(await Promise.all(t.map(t=>e.get("search",{params:g(t.queryParams,t.searchParams)})))).map((e,r)=>({searchQuery:t[r].searchQuery,response:e.data}))}catch(e){throw Error(e.message)}},I=e=>async(t,r)=>{try{return(await e.get("search/images-library-count",{params:g(t,r)})).data}catch(e){throw Error(e.message)}},S=e=>async function(t,r){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];try{return(await e.get("search/suggest",{params:{qt:t,lan:r,related:n}})).data}catch(e){throw Error(e.message)}},A=e=>async(t,r)=>{let n={imageId:t.imageid||"",altRef:r,pageNumber:Number(t.pn),pseudonymId:t.p||"",searchQuery:t.srch,searchId:t.searchId};try{await e.post("rankmeasures",{...n})}catch(e){(0,m.S3)(e)}},T=e=>async(t,r,n)=>{try{let a=await Promise.resolve(P(e)({...r,[p.D2]:t},n));return{collectionType:t,items:(0,f.px)(a.items,n.locale),totalMatches:a.totalMatches}}catch(e){throw Error(e.message)}},R=e=>async(t,r,n)=>{try{let a=await Promise.resolve(P(e)({...r,[p.D2]:t},n));return{collectionType:t,item:(0,f.px)(a.items,n.locale)[0],totalMatches:a.totalMatches}}catch(e){throw Error(e.message)}},q=e=>async(t,r)=>{try{let[n,a,o,l]=await Promise.all([i.yl.Ultimate,i.yl.Vital,i.yl.Uncut,i.yl.Foundation].map(n=>P(e)({...t,[p.D2]:n},r)));return[{collectionType:i.yl.Ultimate,items:(0,f.px)(n.items,r.locale),totalMatches:n.totalMatches},{collectionType:i.yl.Vital,items:(0,f.px)(a.items,r.locale),totalMatches:a.totalMatches},{collectionType:i.yl.Uncut,items:(0,f.px)(o.items,r.locale),totalMatches:o.totalMatches},{collectionType:i.yl.Foundation,items:(0,f.px)(l.items,r.locale),totalMatches:l.totalMatches}]}catch(e){throw Error(e.message)}},M=e=>async(t,r)=>(await e.get("search/agencies",{params:g(t,r)})).data,L=e=>async t=>{try{return(await e.post("showPrompt",t)).data}catch(e){throw Error(e.message)}},U=e=>async t=>{try{return(await e.post("verifyUserPassword",t)).data}catch(e){throw Error(e.message)}},O=e=>async t=>{try{return(await e.post("downloadProcessing",t)).data}catch(e){throw Error(e.message)}},_=e=>async t=>{try{return(await e.post("downloadProcessing/createBulkDownloadOrder",t)).data}catch(e){throw Error(e.message)}},Z=e=>async t=>{try{try{return(await e.get("downloadProcessingVideo",{params:t})).data}catch(e){throw Error(e.message)}}catch(e){throw Error(e.message)}},F=async(e,t)=>{let r=[];for(let i=0;i<e.length;i+=t){let l=e.slice(i,i+t);try{var n,a,o;let e=await fetch("".concat(null===(n=(0,c.b)())||void 0===n?void 0:n.bulkApiUrl,"/products/v1/?ids=").concat(l.join(","),"&langcode=en"));if(!e.ok)throw Error("HTTP error! status: ".concat(e.status));let t=await e.json();null==t||null===(o=t.data)||void 0===o||null===(a=o.items)||void 0===a||a.map(e=>r.push({assetType:"image",assetId:e.ImageId,assetRef:e.ImageRef,assetSeq:e.ImageSeq,licenseType:e.LicenseType,isEditorialOnly:e.IsEditorialOnly,geoRestrictions:e.GeoRestrictions||[],assetStatus:e.ImageStatus}))}catch(e){console.error("Error processing chunk starting at index ".concat(i,":"),e)}}return r},V=async(e,t)=>{let r=[];for(let n=0;n<e.length;n+=t){let a=e.slice(n,n+t);try{await Promise.all(a.map(e=>fetch("".concat((0,c.b)().apiUrl,"/products/").concat(e,"/?type=video")).then(e=>{if(!e.ok)throw Error("HTTP error! status: ".concat(e.status));return e.json()}).then(e=>{var t,n,a,o,i,l,s;r.push({assetType:e.type,assetSubType:e.renditions&&(0,d.MR)(Object.keys(e.renditions)),assetId:null===(t=e.altids)||void 0===t?void 0:t.id,assetRef:null===(n=e.altids)||void 0===n?void 0:n.ref,assetSeq:null===(a=e.altids)||void 0===a?void 0:a.seq,licenseType:null===(o=e.meta)||void 0===o?void 0:o.licencetype,isEditorialOnly:null===(l=e.meta)||void 0===l?void 0:null===(i=l.restrictions)||void 0===i?void 0:i.restrictedForEditorialUse,assetStatus:null===(s=e.meta)||void 0===s?void 0:s.mediastatus,geoRestrictions:[]})})))}catch(e){console.error("Error processing video chunk starting at index ".concat(n,":"),e)}}return r}},26166:function(e,t,r){"use strict";var n,a;r.d(t,{M:function(){return n}}),(a=n||(n={})).MAIN="main",a.DOWNLOAD="download",a.BUY_NOW="buyNow"},56323:function(e,t,r){"use strict";var n,a;r.d(t,{M:function(){return n}}),(a=n||(n={})).UPDATE="UPDATE",a.DELETE="DELETE",a.DUPLICATE="DUPLICATE"},54113:function(e,t,r){"use strict";r.d(t,{GQ:function(){return p},MR:function(){return f},Tx:function(){return d},dv:function(){return u},rc:function(){return v}});var n=r(45429),a=r(65885),o=r(98981),i=r(26166),l=r(56323),s=r(3322),c=r(92658);let u=async(e,t)=>{let r=await (0,s.dL)();return(await r.post("cart/".concat(e),{},{headers:{Cookie:"AlamyUserID=".concat(t)}})).data||[]},d=async e=>{var t,r;let{selections:u,productId:d,variantId:m,addedAt:h=Date.now(),isPremium:p=!1,version:f,type:v,actions:g=[]}=e,y=await (0,s.dL)(),{commercetoolsConfig:w}=(0,o.b)(),x=new a.Z(document.cookie),b=null!==(t=null==x?void 0:x.get(c.YA))&&void 0!==t?t:null,C=p&&w&&l.M.UPDATE?await (0,n.cS)(w):void 0,j=u&&u.length&&(l.M.UPDATE||l.M.DELETE)?null==u?void 0:u.map(e=>{let{lineItemId:t}=e;return{action:"removeLineItem",lineItemId:t}}):[],E=u&&u.length&&v===l.M.UPDATE?null==u?void 0:u.map(e=>{let{alamy_assetId:t,alamy_assetSeq:r,alamy_assetRef:a,assetType:o}=e;return{action:"addLineItem",...(0,n.$C)({productId:d,variantId:m,assetId:t,assetSeq:r,assetRef:a,addedAt:h,channelId:null==C?void 0:C.id,assetType:o,channelKeyWithAsset:b})}}):[],N={version:f,actions:g.length?g:[...j,...E]};try{return await (null===(r=await y.post("cart/".concat(i.M.DOWNLOAD),N))||void 0===r?void 0:r.data)||[]}catch(e){return e.message}},[m,h]=["hd","4k"],p=e=>{let t=null==e?void 0:e.every(e=>{var t;return null===(t=e.assetSubType)||void 0===t?void 0:t.some(e=>e.toLowerCase().includes(h))}),r=null==e?void 0:e.every(e=>{var t;return null===(t=e.assetSubType)||void 0===t?void 0:t.some(e=>e.toLowerCase().includes(m)&&!e.toLowerCase().includes(h))});return t&&r?[m,h]:r?[m]:t?[h]:[]},f=e=>{let t=[];return e.forEach(e=>{e.toLowerCase().includes(m)&&!e.toLowerCase().includes(h)?t.push(m.toUpperCase()):e.toLowerCase().includes(h)&&t.push(h.toUpperCase())}),t},v=e=>{var t,r,n,a;let o=null!==(t=null==e?void 0:e.every(e=>{let{licenseType:t}=e;return"RM"===t}))&&void 0!==t&&t,i=null!==(r=null==e?void 0:e.every(e=>{let{licenseType:t}=e;return"RF"===t}))&&void 0!==r&&r,l=null!==(n=null==e?void 0:e.some(e=>{let{licenseType:t}=e;return"RM"===t}))&&void 0!==n&&n&&null!==(a=null==e?void 0:e.some(e=>{let{licenseType:t}=e;return"RF"===t}))&&void 0!==a&&a;return{hide:i,disable:o||l}}},47640:function(e,t,r){"use strict";r.d(t,{E:function(){return n}});let n=(e,t)=>{let r=document.createElement("a");r.href=e,r.type="hidden",r.download=t||e.split("/").pop()||"",document.body.appendChild(r),r.click(),document.body.removeChild(r)}},43301:function(e,t,r){"use strict";r.d(t,{um:function(){return b},aD:function(){return j},x2:function(){return C}});var n=r(45429),a=r(83109),o=r(25501),i=r(98981),l=r(35193),s=r(68466),c=r(83423),u=r(25320),d=r(98723),m=r(29234),h=r(44289),p=r(3322),f=r(64521),v=r(82604),g=r(28228),y=r(92980);let w=e=>{let{addContext:t,getInitialProps:r,getFinalProps:n}=e;return e=>{let a=async a=>{let o=await t(a),i={...a,...o},l=await r(i);if("redirect"in l||"notFound"in l)return l;let s=l.props,c=await e({...i,initialProps:s});if("redirect"in c||"notFound"in c)return c;let u=await n({...i,initialProps:s});return"redirect"in u||"notFound"in u?u:{props:{...l.props,...c.props,...u.props}}};return a.inner=e,a}},x=(e,t)=>Promise.resolve({props:{pageData:{layoutData:{currency:a.CurrencyCode.GBP,countryCode:null,contactNumber:"",imageCount:0,isDefaultData:!0},authInfo:e,lightboxes:[],cart:{count:0},licences:null,cookieDomain:t}}}),b=async(e,t,r,a,o,l,c,p)=>{var f;let g=(0,v.Z)(a,t.user,s.y.PageData,c),[y,w,x,b,C]=await Promise.all([(0,h.r)(e)(),r?(0,m.RK)(e)():[],r&&!g?(0,u.dv)(e)():{count:0},r&&(null==t?void 0:null===(f=t.user)||void 0===f?void 0:f.isIQUser)&&!g?(0,d.SU)(e)(1,a):null,r&&!p&&l&&g?(0,n.pM)((0,i.b)().commercetoolsConfig,l):null]);return{props:{pageData:{layoutData:y,authInfo:t,lightboxes:w,cart:x,licences:b,cookieDomain:o,ppmInitialCart:C||null}}}},C=w({addContext:async e=>{let{req:t,res:r,locale:n}=e,a=new o.Z(t.headers.cookie),i=(0,g.QR)(t.headers.host||""),s=await (0,p.yx)(a,t),u=await (0,p.yx)(a,t,!0),d=(null==t?void 0:t.headers["x-distributor-territory"])?l.a:n||l.a,m=t.headers["user-agent"]||"",h=(0,y.CA)(m),v=!!(0,f.b)(a),w=await (0,c.yr)(s)(a,r,d,i,h),{referer:x}=t.headers,b=null==a?void 0:a.get("ctToken");return{cookies:a,api:s,locale:d,isBot:h,authInfo:w,isAuthenticatedRequest:v,cookieDomain:i,referer:x,ctToken:b,apiSearch:u}},getInitialProps:e=>{let{authInfo:t,cookieDomain:r}=e;return x(t,r)},getFinalProps:e=>{let{cookies:t}=e;return Promise.resolve({props:{cookie:(0,g.SQ)(t)}})}}),j=w({addContext:async e=>{let{req:t,res:r,locale:n}=e,a=new o.Z(t.headers.cookie),i=(0,g.QR)(t.headers.host||""),s=await (0,p.yx)(a,t),u=await (0,p.yx)(a,t,!0),d=n||l.a,m=t.headers["user-agent"]||"",h=(0,y.CA)(m),v=(0,f.b)(a),w=await (0,c.yr)(s)(a,r,d,i,h),{referer:x}=t.headers,b=null==a?void 0:a.get("ctToken");return{cookies:a,api:s,locale:d,isBot:h,authInfo:w,isAuthenticatedRequest:!!v,cookieDomain:i,referer:x,ctToken:b,apiSearch:u}},getInitialProps:e=>{let{api:t,authInfo:r,isAuthenticatedRequest:n,locale:a,cookieDomain:o,ctToken:i,cookies:l}=e;return b(t,r,n,a,o,i,l)},getFinalProps:e=>{let{cookies:t}=e;return Promise.resolve({props:{cookie:(0,g.SQ)(t)}})}})},15783:function(e){e.exports={modal:"Modal_modal__JNobJ",large:"Modal_large__NOtL4"}},50577:function(e){e.exports={zoom:"OverlayComponent_zoom__KclRJ","slide-top-out":"OverlayComponent_slide-top-out__uJm4t"}}}]);